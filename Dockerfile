FROM ubuntu:16.04

#
# IGUANA Benchmark in a Docker container
# Basic structure of that Docker container:
# /iguana/				Main folder which contains all relevant files and folders
#        /iguana-jars/  Contains neccessary jar-files required by the Benchmark
#        /results/    	Contains resulting data generated by the Benchmark
#        /config.xml 	Config file
#        /queries.txt	Queries file
#        /start.sh      To start the benchmark (autostart)
#

MAINTAINER Simeon Ackermann <amseon@web.de>
MAINTAINER Konrad Abicht <abicht@informatik.uni-leipzig.de>

# Let the conatiner know that there is no tty
ENV DEBIAN_FRONTEND noninteractive

# update package index
RUN apt-get clean && apt-get update

# install some java
RUN apt-get install -y netcat openjdk-8-jre

# create /iguana
RUN mkdir /iguana

# add config.xml and queries.txt
ADD config.xml /iguana/config.xml
ADD queries.txt /iguana/queries.txt

# /iguana/jars will contain all required jar files
RUN mkdir /iguana/iguana-jars
# put Jars into the Docker
ADD iguana-jars /iguana/iguana-jars

# results folder will contain resulting data (e.g. diagrams, stats, ...)
RUN mkdir /iguana/results

# add start script to execute the benchmark
ADD start.sh /iguana/start.sh

WORKDIR /iguana

# execute the start script with parameters
CMD ["/bin/bash", "/iguana/start.sh", "./iguana-jars/", "config.xml", "queries.txt"]
